\documentclass[a4paper,twocolumn]{extarticle}
 
\usepackage{lmodern}
\usepackage{anyfontsize}
%\renewcommand{\normalsize}{\fontsize{7pt}{8.4pt}\selectfont}
\usepackage{setspace}
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc} % Добавлено для поддержки кириллицы
\usepackage[english]{babel}

\usepackage{extsizes}
\usepackage[a4paper,top=0.5cm,bottom=1.0cm,left=1.0cm,right=0.5cm,nomarginpar,foot=0.3cm,includehead]{geometry}
\usepackage{lastpage}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{fancyhdr}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{tikz}

\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,
    urlcolor=blue,
    pdftitle={Code Library},
    pdfauthor={St. Petersburg State University}
}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{1,1,1}

\lstdefinestyle{codestyle}{
    language=C++,
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    extendedchars=true,
    inputencoding=utf8,
    literate={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
}

\lstset{
    style=codestyle
}

\setlength{\columnseprule}{0.4pt}
\setlength{\columnsep}{30pt}

\begin{document}
    \pagestyle{fancy}
    \fancyhead[LO]{St. Petersburg State University (Ananev, Kuznetsov, Zgonnik)}
    \fancyhead[R]{Page \thepage~of~\pageref{LastPage}}
    \fancyfoot{}

    {\fontsize{7.8pt}{8.5pt}\selectfont
        \tableofcontents
        \newpage
        \section{Starting}
        \lstinputlisting{starting/starting.cpp}
        \lstinputlisting{rng/rng.cpp}
        
        \section{Number Theory}
        \subsection{Fast pow}
        \lstinputlisting{Number Theory/fastpow/fastpow.cpp}
        \subsection{Eratosthenes}
        \lstinputlisting{Number Theory/eratosphen.cpp}
        \subsection{Linear Sieve}
        \lstinputlisting{Number Theory/Linear Sieve/Linear Sieve.cpp}
        \subsection{Factorization sqrt}
        \lstinputlisting{Number Theory/factorization sqrt/factorization sqrt.cpp}
        \subsection{All divisors}
        \lstinputlisting{Number Theory/Divisors/All divisors.cpp}
        \subsection{Miller Rabin}
        \lstinputlisting{Number Theory/Miller Rabin.cpp}
        
        \section{Graphs}
        \subsection{Searches}
        \subsubsection{DFS}
        \lstinputlisting{Graphs/dfs.cpp}
        \subsubsection{BFS}
        \lstinputlisting{Graphs/bfs.cpp}
        \subsubsection{Least Common Ancestor}
        \lstinputlisting{Graphs/Graphs/LCA.cpp}
        \subsection{Dejkstra}
        \lstinputlisting{Graphs/Weighted Graphs/djkstra.cpp}
        \subsection{Strong components}
        \lstinputlisting{Graphs/Directed Graphs/Sharir-Cosaradgu.cpp}
        \subsection{Flows}
        \subsubsection{Dinic}
        \lstinputlisting{Graphs/Weighted Graphs/Dinic.cpp}
    }
    \newpage
\end{document}
